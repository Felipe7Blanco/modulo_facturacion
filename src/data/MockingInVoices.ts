/* eslint-disable @typescript-eslint/no-explicit-any */
import { IInvoice, IUser } from "../types/invoice.types";

// Usuarios de prueba
export const mockUsers: IUser[] = [
  {
    _id: "1",
    name: "Ana Rocío Guzmán",
    email: "ana.guzman@example.com",
    avatar: { url: "https://i.pravatar.cc/150?img=1" },
  },
  {
    _id: "2",
    name: "María Alexandra Guarín Vargas",
    email: "maria.guarin@example.com",
    avatar: { url: "https://i.pravatar.cc/150?img=5" },
  },
  {
    _id: "3",
    name: "Carlos Rodríguez",
    email: "carlos.rodriguez@example.com",
    avatar: { url: "https://i.pravatar.cc/150?img=12" },
  },
  {
    _id: "4",
    name: "Laura Martínez",
    email: "laura.martinez@example.com",
    avatar: { url: "https://i.pravatar.cc/150?img=9" },
  },
  {
    _id: "5",
    name: "Juan Pablo Sánchez",
    email: "juan.sanchez@example.com",
    avatar: { url: "https://i.pravatar.cc/150?img=15" },
  },
  {
    _id: "6",
    name: "Sofia Ramírez",
    email: "sofia.ramirez@example.com",
    avatar: { url: "https://i.pravatar.cc/150?img=23" },
  },
];

// Facturas de prueba
export const mockInvoices: IInvoice[] = [
  {
    _id: "inv-001",
    invoiceNumber: "TW3035",
    institute: "inst-001",
    student: mockUsers[0],
    customer: mockUsers[0],
    issueDate: new Date("2026-02-02"),
    currency: "COP",
    paymentMethod: "transfer",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-001",
        name: "Mensualidad Febrero 2026",
        description: "Cuota mensual educativa",
        price: 245000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 245000,
      },
    ],
    subtotal: 245000,
    totalDiscount: 0,
    totalTax: 0,
    total: 245000,
    status: "sent",
    notes: "Pago realizado a tiempo",
    createdAt: new Date("2026-02-02"),
    updatedAt: new Date("2026-02-02"),
  },
  {
    _id: "inv-002",
    invoiceNumber: "TW3034",
    institute: "inst-001",
    student: mockUsers[1],
    customer: mockUsers[1],
    issueDate: new Date("2026-01-21"),
    currency: "COP",
    paymentMethod: "credit",
    paymentType: "credit",
    dueDate: new Date("2026-02-21"),
    invoiceItems: [
      {
        _id: "item-002",
        name: "Mensualidad Enero 2026",
        price: 75000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 75000,
      },
    ],
    subtotal: 75000,
    totalDiscount: 0,
    totalTax: 0,
    total: 75000,
    status: "rejected",
    notes: "Cliente solicita ajuste en la factura",
    createdAt: new Date("2026-01-21"),
    updatedAt: new Date("2026-01-21"),
  },
  {
    _id: "inv-003",
    invoiceNumber: "TW3033",
    institute: "inst-001",
    student: mockUsers[2],
    customer: mockUsers[2],
    issueDate: new Date("2026-01-12"),
    currency: "COP",
    paymentMethod: "cash",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-003",
        name: "Curso Programación Avanzada",
        price: 3500000,
        quantity: 1,
        discount: 50000,
        tax: 0,
        total: 3450000,
      },
      {
        _id: "item-004",
        name: "Material didáctico",
        price: 100000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 100000,
      },
    ],
    subtotal: 3600000,
    totalDiscount: 50000,
    totalTax: 0,
    total: 3550000,
    status: "sent",
    createdAt: new Date("2026-01-12"),
    updatedAt: new Date("2026-01-12"),
  },
  {
    _id: "inv-004",
    invoiceNumber: "TW3032",
    institute: "inst-001",
    student: mockUsers[3],
    customer: mockUsers[3],
    issueDate: new Date("2026-01-10"),
    dueDate: new Date("2026-02-10"),
    currency: "COP",
    paymentMethod: "transfer",
    paymentType: "credit",
    invoiceItems: [
      {
        _id: "item-005",
        name: "Matrícula anual",
        price: 1200000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 1200000,
      },
    ],
    subtotal: 1200000,
    totalDiscount: 0,
    totalTax: 0,
    total: 1200000,
    status: "pending",
    notes: "Pendiente de confirmación bancaria",
    createdAt: new Date("2026-01-10"),
    updatedAt: new Date("2026-01-10"),
  },
  {
    _id: "inv-005",
    invoiceNumber: "TW3031",
    institute: "inst-001",
    student: mockUsers[4],
    customer: mockUsers[4],
    issueDate: new Date("2026-01-08"),
    currency: "COP",
    paymentMethod: "debit",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-006",
        name: "Taller de Design Thinking",
        price: 450000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 450000,
      },
    ],
    subtotal: 450000,
    totalDiscount: 0,
    totalTax: 0,
    total: 450000,
    status: "paid",
    createdAt: new Date("2026-01-08"),
    updatedAt: new Date("2026-01-08"),
  },
  {
    _id: "inv-006",
    invoiceNumber: "TW3030",
    institute: "inst-001",
    student: mockUsers[5],
    customer: mockUsers[5],
    issueDate: new Date("2026-01-05"),
    currency: "USD",
    paymentMethod: "credit",
    paymentType: "credit",
    dueDate: new Date("2026-02-05"),
    purchaseOrder: "PO-2026-001",
    invoiceItems: [
      {
        _id: "item-007",
        name: "Curso Internacional Online",
        price: 500,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 500,
      },
    ],
    subtotal: 500,
    totalDiscount: 0,
    totalTax: 0,
    total: 500,
    status: "pending",
    createdAt: new Date("2026-01-05"),
    updatedAt: new Date("2026-01-05"),
  },
  {
    _id: "inv-007",
    invoiceNumber: "TW3029",
    institute: "inst-001",
    student: mockUsers[0],
    customer: mockUsers[0],
    issueDate: new Date("2026-01-03"),
    currency: "COP",
    paymentMethod: "cash",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-008",
        name: "Certificación Profesional",
        price: 850000,
        quantity: 1,
        discount: 85000,
        tax: 0,
        total: 765000,
      },
    ],
    subtotal: 850000,
    totalDiscount: 85000,
    totalTax: 0,
    total: 765000,
    status: "sent",
    additionalDiscount: 85000,
    notes: "Descuento por pronto pago",
    createdAt: new Date("2026-01-03"),
    updatedAt: new Date("2026-01-03"),
  },
  {
    _id: "inv-008",
    invoiceNumber: "TW3028",
    institute: "inst-001",
    student: mockUsers[1],
    customer: mockUsers[1],
    issueDate: new Date("2025-12-28"),
    dueDate: new Date("2026-01-28"),
    currency: "COP",
    paymentMethod: "transfer",
    paymentType: "credit",
    invoiceItems: [
      {
        _id: "item-009",
        name: "Bootcamp Full Stack",
        price: 2800000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 2800000,
      },
    ],
    subtotal: 2800000,
    totalDiscount: 0,
    totalTax: 0,
    total: 2800000,
    status: "overdue",
    notes: "Pago vencido - contactar al cliente",
    createdAt: new Date("2025-12-28"),
    updatedAt: new Date("2025-12-28"),
  },
  {
    _id: "inv-009",
    invoiceNumber: "TW3027",
    institute: "inst-001",
    student: mockUsers[2],
    customer: mockUsers[2],
    issueDate: new Date("2025-12-20"),
    currency: "COP",
    paymentMethod: "debit",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-010",
        name: "Workshop UX/UI",
        price: 380000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 380000,
      },
    ],
    subtotal: 380000,
    totalDiscount: 0,
    totalTax: 0,
    total: 380000,
    status: "paid",
    createdAt: new Date("2025-12-20"),
    updatedAt: new Date("2025-12-20"),
  },
  {
    _id: "inv-010",
    invoiceNumber: "TW3026",
    institute: "inst-001",
    student: mockUsers[3],
    customer: mockUsers[3],
    issueDate: new Date("2025-12-15"),
    currency: "COP",
    paymentMethod: "cash",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-011",
        name: "Módulo React Avanzado",
        price: 650000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 650000,
      },
    ],
    subtotal: 650000,
    totalDiscount: 0,
    totalTax: 0,
    total: 650000,
    status: "sent",
    createdAt: new Date("2025-12-15"),
    updatedAt: new Date("2025-12-15"),
  },
  {
    _id: "inv-011",
    invoiceNumber: "TW3025",
    institute: "inst-001",
    student: mockUsers[4],
    customer: mockUsers[4],
    issueDate: new Date("2025-12-10"),
    dueDate: new Date("2026-01-10"),
    currency: "COP",
    paymentMethod: "credit",
    paymentType: "credit",
    invoiceItems: [
      {
        _id: "item-012",
        name: "Diplomado Data Science",
        price: 4200000,
        quantity: 1,
        discount: 200000,
        tax: 0,
        total: 4000000,
      },
    ],
    subtotal: 4200000,
    totalDiscount: 200000,
    totalTax: 0,
    total: 4000000,
    status: "pending",
    additionalDiscount: 200000,
    notes: "Descuento corporativo aplicado",
    createdAt: new Date("2025-12-10"),
    updatedAt: new Date("2025-12-10"),
  },
  {
    _id: "inv-012",
    invoiceNumber: "TW3024",
    institute: "inst-001",
    student: mockUsers[5],
    customer: mockUsers[5],
    issueDate: new Date("2025-12-05"),
    currency: "EUR",
    paymentMethod: "transfer",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-013",
        name: "Master Class Internacional",
        price: 350,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 350,
      },
    ],
    subtotal: 350,
    totalDiscount: 0,
    totalTax: 0,
    total: 350,
    status: "paid",
    createdAt: new Date("2025-12-05"),
    updatedAt: new Date("2025-12-05"),
  },
  {
    _id: "inv-013",
    invoiceNumber: "TW3023",
    institute: "inst-001",
    student: mockUsers[0],
    customer: mockUsers[0],
    issueDate: new Date("2025-12-01"),
    currency: "COP",
    paymentMethod: "debit",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-014",
        name: "Tutoría Personalizada - 10 horas",
        price: 500000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 500000,
      },
    ],
    subtotal: 500000,
    totalDiscount: 0,
    totalTax: 0,
    total: 500000,
    status: "sent",
    createdAt: new Date("2025-12-01"),
    updatedAt: new Date("2025-12-01"),
  },
  {
    _id: "inv-014",
    invoiceNumber: "TW3022",
    institute: "inst-001",
    student: mockUsers[1],
    customer: mockUsers[1],
    issueDate: new Date("2025-11-28"),
    dueDate: new Date("2025-12-28"),
    currency: "COP",
    paymentMethod: "check",
    paymentType: "credit",
    purchaseOrder: "PO-2025-045",
    invoiceItems: [
      {
        _id: "item-015",
        name: "Seminario DevOps",
        price: 920000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 920000,
      },
    ],
    subtotal: 920000,
    totalDiscount: 0,
    totalTax: 0,
    total: 920000,
    status: "rejected",
    notes: "Datos bancarios incorrectos",
    createdAt: new Date("2025-11-28"),
    updatedAt: new Date("2025-11-28"),
  },
  {
    _id: "inv-015",
    invoiceNumber: "TW3021",
    institute: "inst-001",
    student: mockUsers[2],
    customer: mockUsers[2],
    issueDate: new Date("2025-11-25"),
    currency: "COP",
    paymentMethod: "cash",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-016",
        name: "Kit de Herramientas Pro",
        price: 150000,
        quantity: 2,
        discount: 0,
        tax: 0,
        total: 300000,
      },
    ],
    subtotal: 300000,
    totalDiscount: 0,
    totalTax: 0,
    total: 300000,
    additionalCharges: 50000,
    status: "paid",
    notes: "Cargo adicional por envío express",
    createdAt: new Date("2025-11-25"),
    updatedAt: new Date("2025-11-25"),
  },
  {
    _id: "inv-016",
    invoiceNumber: "TW3020",
    institute: "inst-001",
    student: mockUsers[3],
    customer: mockUsers[3],
    issueDate: new Date("2025-11-20"),
    currency: "COP",
    paymentMethod: "transfer",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-017",
        name: "Conferencia Anual Tech",
        price: 180000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 180000,
      },
    ],
    subtotal: 180000,
    totalDiscount: 0,
    totalTax: 0,
    total: 180000,
    status: "sent",
    createdAt: new Date("2025-11-20"),
    updatedAt: new Date("2025-11-20"),
  },
  {
    _id: "inv-017",
    invoiceNumber: "TW3019",
    institute: "inst-001",
    student: mockUsers[4],
    customer: mockUsers[4],
    issueDate: new Date("2025-11-18"),
    dueDate: new Date("2025-12-18"),
    currency: "COP",
    paymentMethod: "credit",
    paymentType: "credit",
    invoiceItems: [
      {
        _id: "item-018",
        name: "Licencia Software Anual",
        price: 2400000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 2400000,
      },
    ],
    subtotal: 2400000,
    totalDiscount: 0,
    totalTax: 0,
    total: 2400000,
    status: "overdue",
    notes: "Renovación pendiente",
    createdAt: new Date("2025-11-18"),
    updatedAt: new Date("2025-11-18"),
  },
  {
    _id: "inv-018",
    invoiceNumber: "TW3018",
    institute: "inst-001",
    student: mockUsers[5],
    customer: mockUsers[5],
    issueDate: new Date("2025-11-15"),
    currency: "COP",
    paymentMethod: "debit",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-019",
        name: "Workshop Cloud Computing",
        price: 550000,
        quantity: 1,
        discount: 50000,
        tax: 0,
        total: 500000,
      },
    ],
    subtotal: 550000,
    totalDiscount: 50000,
    totalTax: 0,
    total: 500000,
    status: "paid",
    additionalDiscount: 50000,
    notes: "Descuento por referido",
    createdAt: new Date("2025-11-15"),
    updatedAt: new Date("2025-11-15"),
  },
  {
    _id: "inv-019",
    invoiceNumber: "TW3017",
    institute: "inst-001",
    student: mockUsers[0],
    customer: mockUsers[0],
    issueDate: new Date("2025-11-10"),
    currency: "COP",
    paymentMethod: "cash",
    paymentType: "immediate",
    invoiceItems: [
      {
        _id: "item-020",
        name: "Curso Ciberseguridad Básica",
        price: 680000,
        quantity: 1,
        discount: 0,
        tax: 0,
        total: 680000,
      },
    ],
    subtotal: 680000,
    totalDiscount: 0,
    totalTax: 0,
    total: 680000,
    status: "sent",
    createdAt: new Date("2025-11-10"),
    updatedAt: new Date("2025-11-10"),
  },
  {
    _id: "inv-020",
    invoiceNumber: "TW3016",
    institute: "inst-001",
    student: mockUsers[1],
    customer: mockUsers[1],
    issueDate: new Date("2025-11-05"),
    dueDate: new Date("2025-12-05"),
    currency: "COP",
    paymentMethod: "transfer",
    paymentType: "credit",
    purchaseOrder: "PO-2025-038",
    invoiceItems: [
      {
        _id: "item-021",
        name: "Programa Executive MBA",
        price: 8500000,
        quantity: 1,
        discount: 500000,
        tax: 0,
        total: 8000000,
      },
    ],
    subtotal: 8500000,
    totalDiscount: 500000,
    totalTax: 0,
    total: 8000000,
    status: "pending",
    additionalDiscount: 500000,
    notes: "Plan de pagos en 4 cuotas",
    createdAt: new Date("2025-11-05"),
    updatedAt: new Date("2025-11-05"),
  },
];

// Función helper para filtrar facturas
export function filterInvoices(invoices: IInvoice[], filters: any) {
  return invoices.filter((invoice) => {
    // Filtro por búsqueda (cliente o número)
    if (filters.search) {
      const search = filters.search.toLowerCase();
      const matchesNumber = invoice.invoiceNumber
        .toLowerCase()
        .includes(search);
      const matchesCustomer = invoice.customer.name
        .toLowerCase()
        .includes(search);
      if (!matchesNumber && !matchesCustomer) return false;
    }

    // Filtro por estado
    if (filters.status && invoice.status !== filters.status) {
      return false;
    }

    // Filtro por rango de fechas
    if (
      filters.startDate &&
      new Date(invoice.issueDate) < new Date(filters.startDate)
    ) {
      return false;
    }
    if (
      filters.endDate &&
      new Date(invoice.issueDate) > new Date(filters.endDate)
    ) {
      return false;
    }

    return true;
  });
}

// Función para calcular estadísticas
export function calculateInvoiceStats(invoices: IInvoice[]) {
  return {
    total: invoices.length,
    pending: invoices.filter((inv) => inv.status === "pending").length,
    sent: invoices.filter((inv) => inv.status === "sent").length,
    problem: invoices.filter((inv) => inv.status === "overdue").length,
    rejected: invoices.filter((inv) => inv.status === "rejected").length,
  };
}
